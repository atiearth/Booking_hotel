package com.cp.project.demo.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.cp.project.demo.model.forRoom.Room;
import com.cp.project.demo.model.forRoom.RoomFactory;
import com.cp.project.demo.model.forRoom.RoomInterface;
import com.cp.project.demo.repository.RoomRepository;

@Service
public class RoomService {
	@Autowired
	RoomRepository roomRepo;
	
	private RoomFactory roomFactory;
	
	public List<Room> getRooms() {
		return (List<Room>) roomRepo.findAll();
	}
	
	public Room getRoomById(Integer id) {
		return (Room) roomRepo.findById(id).orElseThrow();
	}
	
	public RoomInterface createRoom(String roomType) {
        RoomInterface room = roomFactory.createRoom(roomType);
        if (room instanceof Room) {
            return (RoomInterface) roomRepo.save((Room) room);
        }
        return null;
    }
	
	public Room updateRoom(Integer id, Room room) {
		Room existRoom = roomRepo.findById(id).get();
		existRoom.setRoomPrice(room.getRoomPrice());
		existRoom.setRoom_per_person(room.getRoom_per_person());
		existRoom.setRoomSize(room.getRoomSize());
		existRoom.setRoomStatus(room.getRoomStatus());
		existRoom.setRoomType(room.getRoomType());
		return roomRepo.save(existRoom);
	}
	
	public void deleteRoom(Integer id) {
		roomRepo.deleteById(id);
	}
}
